# Массивы в языке программирования PHP

## Что такое массивы?

Перед тем как рассмотреть массивы в PHP, напомним, что такое массив в общем понимании программирования.

**Массив** — это структура данных, которая позволяет хранить упорядоченные элементы. Обычно в программировании массивы содержат элементы одного типа.

> [!NOTE]
> В PHP массивы могут хранить элементы различных типов: числа, строки, объекты и другие массивы.

Массив можно представить как набор пронумерованных коробок, каждая из которых содержит определённый элемент. Коробки имеют уникальные номера — индексы, по которым можно найти элементы. [^1].

<img src="https://imgur.com/GscGqPf.png" alt="Array" /> [^2]

Массивы используются для:

- **Хранения большого количества данных**. Например, список пользователей.
- **Упрощения работы с данными**. С помощью индексов можно быстро находить и изменять элементы.
- **Выполнения операций над элементами**. Например, сортировка, фильтрация и поиск.

## Массивы в PHP

Массивы в PHP отличаются от массивов в других языках программирования, предоставляя большую гибкость и универсальность.

**Массив в PHP** — это упорядоченная структура данных, которая связывает ключи и значения [^3]. Например, ключу `1` может соответствовать значение `apple`, ключу `2` — значение `banana` и т. д.

Этот тип данных оптимизирован для выполнения множества задач. Он может использоваться как:

- обычный массив,
- список,
- хеш-таблица,
- стек,
- очередь,
- и другие структуры данных.

Благодаря своей универсальности массивы в PHP могут применяться в разных сценариях. Кроме того, массивы могут быть многомерными, то есть содержать другие массивы в качестве элементов.

В PHP выделяют два основных типа массивов:

- **Индексированные массивы**. Ключи — целые числа, начинающиеся с 0 и увеличивающиеся на 1 для каждого следующего элемента (обычные массивы).
- **Ассоциативные массивы**. Ключи могут быть произвольными строками.

> [!IMPORTANT]
> Важно отметить одну ключевую особенность: **все массивы в PHP представляют собой структуры данных типа "ключ-значение"**.
> **Даже индексированные массивы фактически являются наборами пар "ключ-значение"**, где ключами выступают целые числа, начинающиеся с 0, и они функционируют как индексы (или псевдоиндексы).

### Индексированные массивы

**Индексированные массивы** можно создать с помощью функции `array()` или использовать короткий синтаксис с квадратными скобками `[].`

**Пример.** _Создание индексированного массива_

```php
// Создание массива с помощью array()
$arr = array(1, 2, 3);

// Короткий синтаксис
$arr = [1, 2, 3];

// Создание массива с помощью индексов
$arr[0] = 1;
$arr[1] = 2;
$arr[2] = 3;

// Доступ к элементам массива
echo $arr[0]; // Вывод: 1
```

### Ассоциативные массивы

Ассоциативные массивы позволяют использовать произвольные строки или числа в качестве ключей. Их можно создать с помощью функции `array()` или квадратных скобок `[]`.

**Синтаксис**:

```php
array (
    ключ => значение,
    ключ => значение,
    ...,
)
```

> [!NOTE]
> Запятая после последнего элемента массива необязательна и её можно опустить. Обычно это делается для однострочных массивов, — лучше предпочесть `array(1, 2)` вместо `array(1, 2, )`. Для многострочных массивов, наоборот, обычно указывают висящую запятую, так как упрощает добавление новых элементов в конец массива.

**Пример.** _Создание ассоциативного массива_

```php
$arr = array(
    'name' => 'John',
    'age' => 30,
    'city' => 'New York'
);

// Короткий синтаксис
$arr = [
    'name' => 'John',
    'age' => 30,
    'city' => 'New York'
];

// Вывод элемента массива
echo $arr['name']; // John
echo $arr['age']; // 30
```

В данном случае `name`, `age` и `city` — это ключи, а `'John'`, `30` и `'New York'` — значения.

Если ключ не указан, PHP автоматически присваивает следующий доступный индекс.

**Пример.** _Индексированный и ассоциативный массив_

```php
$arr = [
    'name' => 'John',
    'city' => 'New York'
    'Delaware', // индекс (ключ) 0 (следующий доступный)
    'USA', // индекс (ключ) 1
    'age' => 30
];

echo $arr[0]; // Delaware
echo $arr['age'] // 30
```

Ключи других типов (например, `bool`, `float`, `null) автоматически преобразуются в строки или числа.

**Пример.** _Преобразование ключа в строку_

```php
$arr = [
    true => 'True',
    '2' => 'Two',
    4.5 => 'Four and a half',
    null => 'Null',
];

var_dump($arr);
```

Результат выполнения приведённого примера:

```bash
array(4) {
  [1] => string(4) "True"
  [2] => string(3) "Two"
  [4] => string(15) "Four and a half"
  [""] => string(4) "Null"
}
```

- `true` преобразуется в `1`.
- Строка `'2'` преобразуется в число `2`.
- Число `4.5` преобразуется в число `4.`
- `null` преобразуется в пустую строку `''`.

Предположите, что произойдёт, если в конец массива выше добавить элемент без ключа? Какой индекс он получит?

### Доступ к несуществующему ключу

Если попытаться обратиться к ключу массива, который не существует, PHP вернёт `null` и выведет предупреждение.

**Пример.** _Обращение к несуществующему ключу_

```php
<?php

$arr = [
    'name' => 'John',
    'city' => 'New York'
];

echo $arr['age']; // PHP Warning:  Undefined array key "age"

echo 'Следующая строка...'; // PHP продолжит выполнение и выведет эту строку
```

Чтобы избежать предупреждений при доступе к несуществующему ключу, можно использовать следующие подходы:

- **Функция** `isset()`. Проверяет, существует ли ключ в массиве и его значение не равно null.
- **Функция** `array_key_exists()`. Проверяет, существует ли ключ в массиве, независимо от значения (`null` или `нет`).
- **Оператор** `??`. Возвращает значение по умолчанию, если ключ не существует.

**Пример.** _Проверка существования ключа_

```php
<?php

$arr = [
    'name' => 'John',
    'city' => 'New York'
];

// Использование isset()
if (isset($arr['age'])) {
    echo $arr['age'];
} else {
    echo 'Ключ "age" не существует';
}

// Использование array_key_exists()
if (array_key_exists('age', $arr)) {
    echo $arr['age'];
} else {
    echo 'Ключ "age" не существует';
}

// Использование оператора ??
echo $arr['age'] ?? 'Ключ "age" не существует';
```

### Массивы в PHP могут содержать элементы разных типов данных

Одной из особенностей массивов в PHP является их способность хранить элементы разных типов данных в одном массиве.

Это могут быть числа, строки, логические значения, объекты и даже вложенные массивы.

**Пример.** _Индексированный массив с разными типами данных_

```php
<?php

$arr = [
    1,               // Целое число
    'Hello',         // Строка
    true,            // Логическое значение
    null,            // Null
    ['apple', 'banana'] // Вложенный массив
];
```

**Пример.** _Ассоциативный массив с разными типами данных_

```php
<?php

// Ассоциативный массив с элементами разных типов
$arr = [
    'name' => 'John',                  // Строка
    'age' => 30,                       // Целое число
    'isStudent' => true,               // Логическое значение
    'city' => null,                    // Null
    'address' => [                     // Вложенный массив
        'street' => 'Main St',
        'city' => 'New York'
    ]
];
```

[^1]: _Массив_. SkillFactory [online resource]. Available at: https://blog.skillfactory.ru/glossary/massiv/
[^2]: _Yugandharkumar. Arrays_. medium [online resource]. Available at: https://yugandharkumar05.medium.com/arrays-c5a00de6c32c
[^3]: _Arrays_. php.net [online resource]. Available at: https://www.php.net/manual/en/language.types.array.php
