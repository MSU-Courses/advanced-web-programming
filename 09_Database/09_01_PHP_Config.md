# Конфигурация PHP для работы с базами данных

Ранее для хранения данных мы использовали файлы. Однако такой подход имеет ряд существенных недостатков:

- **Ограниченный объём данных**. Файлы плохо масштабируются при работе с большими объёмами информации.
- **Сложности при поиске и обработке**. Извлечение нужных данных требует ручного перебора или дополнительной логики.
- **Трудности с обновлением**. Изменение данных в файле может быть неудобным и неэффективным.
- **Невозможность совместного доступа**. Одновременная работа нескольких пользователей с файлами может привести к конфликтам.
- **Недостаточный уровень безопасности**. Файлы сложно защитить от несанкционированного доступа без дополнительных механизмов.

Для преодоления этих ограничений используются базы данных. База данных — это структурированное хранилище, которое обеспечивает удобное и эффективное управление данными их хранение, поиск, обновление и защиту.

Вы уже знакомы с базами данных из курса по SQL. В этом разделе мы рассмотрим, как взаимодействовать с базами данных в PHP.

## Настройка окружения для работы с базами данных

Прежде чем приступить к написанию кода для взаимодействия с базой данных, необходимо правильно настроить окружение PHP. Без соответствующей конфигурации подключение к базе данных и выполнение SQL-запросов будут невозможны, так как это требует наличия определённых расширений, которые могут быть отключены в настройках PHP.

### Выбор системы управления базами данных

PHP поддерживает множество систем управления базами данных (далее СУБД). В зависимости от того, с какой СУБД вы планируете работать, необходимо подключить соответствующее расширение.

> [!TIP]
> В этой главе в качестве примера будет использоваться MySQL, однако принципы работы с другими СУБД во многом аналогичны.

### Установка PHP и необходимых расширений

Для работы с базами данных в PHP необходимо установить расширения, которые обеспечивают взаимодействие с конкретными СУБД. Наиболее распространённые расширения:

- `mysqli`. Это расширение предназначено для работы с MySQL и поддерживает как процедурный, так и объектно-ориентированный подход.
- PDO (PHP Data Objects). Это расширение обеспечивает универсальный интерфейс для работы с различными базами данных, включая _MySQL_, _SQLite_ и _PostgreSQL_ (всего поддерживается 12 различных СУБД). 
  - `pdo_mysql` (для работы с MySQL).
  - `pdo_sqlite` (для работы с SQLite).
  - `pdo_pgsql` и `pgsql` (для работы с PostgreSQL).
  - и другие.

Если вы используете готовые сборки, такие как *XAMPP*, *MAMP* или *OpenServer*, расширения `mysqli` и `pdo_mysql`, как правило, уже активированы. В ином случае потребуется вручную раскомментировать соответствующие строки в файле конфигурации `php.ini` — _например_:

```ini
extension=mysqli
extension=pdo_mysql
```

После внесения изменений в `php.ini` необходимо перезапустить веб-сервер, чтобы новые настройки вступили в силу.

### Дополнительная конфигурация

Помимо активации расширений, рекомендуется проверить и другие параметры конфигурации:

- **Кодировка**. Установите `default_charset = "UTF-8"` для корректной работы с Unicode-данными.
- **Ошибки**. В режиме разработки следует включить отображение ошибок, установив:
  ```ini
  display_errors = On
  error_reporting = E_ALL
  ```
  Это поможет быстрее находить и устранять проблемы при подключении и выполнении запросов.

> [!WARNING]
> В продакшн-окружении не следует отображать ошибки пользователю. Вместо этого их стоит логировать. Убедитесь, что `display_errors = Off`, чтобы избежать утечки чувствительной информации.