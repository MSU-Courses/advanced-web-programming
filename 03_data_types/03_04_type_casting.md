# Преобразование типов

Представим ситуацию: вы разрабатываете приложение, где пользователь вводит число, но ввод поступает в виде строки. Чтобы корректно выполнить математические операции, это значение нужно преобразовать в число, этот процесс называется **преобразованием типов**.

**Преобразование типов** — это процесс, который позволяет адаптировать данные под конкретные нужды программы. В PHP преобразование может происходить автоматически (**неявно**) или управляться программистом вручную (**явно**).

Это мощный инструмент, который помогает работать с данными разных типов, например, преобразовывать строки в числа, массивы в объекты или наоборот.

В данной теме будут рассмотрены самые часто используемые способы преобразования типов в PHP [^1].

## Явное преобразование типов

**Явное преобразование происходит**, когда программист самостоятельно указывает тип, к которому нужно привести данные. Это позволяет контролировать процесс преобразования и избежать неожиданных ошибок.

Для явного преобразования можно использовать:

- **Функции преобразования типов**. PHP предоставляет ряд функций для преобразования данных из одного типа в другой. Например, `intval()`, `floatval()`, `strval()` или `settype()`.
- **Приведение типов**. Приведение типов — это преобразование значения переменной к другому типу. Для этого используется оператор `(тип)`. Например, `(int)`, `(float)`, `(string)`.

**Пример преобразования строки в число**:

```php
<?php

// Преобразование строки в число
$number = "42";

// 1 вариант
$intNumber = intval($number);

// 2 вариант
$intNumber = (int) $number;

// 3 вариант
settype($number, "int");
```

## Неявное преобразование типов

**Неявное преобразование** происходит автоматически, когда PHP определяет, что это необходимо для выполнения операции. Это делает код более компактным, но может приводить к неожиданным результатам, если не учитывать особенности работы языка.

**Примеры неявного преобразования**:

- **Строка в число при выполнении арифметических операций**. Если строка содержит числовое значение, PHP автоматически преобразует её в число.
  ```php
  <?php
  
  $result = "10" + 5; // Строка "10" преобразуется в число
  echo $result; // 15
  ```
- **Число в строку при конкатенации**. Если к числу применяется операция конкатенации (`.`), оно преобразуется в строку.
  ```php
  <?php

  $value = 42;
  $str = "Ответ: " . $value; // Число 42 становится строкой
  echo $str; // "Ответ: 42"
  ```
- **Преобразование логических значений**. Логические значения (`true` и `false`) преобразуются в `1` и `0` соответственно при использовании в арифметических операциях.
  ```php
  <?php

  $sum = true + false; // true преобразуется в 1, false в 0
  echo $sum; // 1
  ```
- **Преобразование в логический тип при проверке условий**. При использовании переменной в условии она преобразуется в true или false в зависимости от значения.
  ```php
  <?php
  
  $value = 42;
  if ($value) {
      echo "Значение не равно нулю";
  }
  ```

### Особенности неявного преобразования

Неявное преобразование типов в PHP упрощает работу с данными, но требует осторожности, так как может приводить к неожиданным ошибкам.

Например, при выполнении арифметических операций со строкой и числом, PHP попытается преобразовать строку в число. Однако, если строка не содержит числового значения, это вызовет исключение:

```php
<?php

// Будет выброшено исключение: Unsupported operand types: string + int
// Это происходит потому, что строка "Not a Number" не может быть преобразована в число
$result = "Not a Number" + 5;
```

Чтобы избежать таких ошибок, рекомендуется заранее проверять или явно преобразовывать типы данных перед выполнением операций.

[^1]: *Type Juggling*. php.net [online resource]. Available at: https://www.php.net/manual/en/language.types.type-juggling.php
