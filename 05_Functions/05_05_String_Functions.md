# Функции работы со строками

**Работа со строками** — это одна из самых частых задач при разработке на PHP. Например, вы можете удалять лишние пробелы, преобразовывать регистр текста или искать подстроки.

Примеры функций для работы со строками:

- `strlen()` — возвращает длину строки.
- `strtolower()` — преобразует строку в нижний регистр.
- `strtoupper()` — преобразует строку в верхний регистр.
- `ucfirst()` — преобразует первый символ строки в верхний регистр.
- `trim()` — удаляет пробелы и другие символы из начала и конца строки.
- `ltrim()` — удаляет пробелы и другие символы из начала строки.
- `rtrim()` — удаляет пробелы и другие символы из конца строки.
- `strpos()` — находит позицию первого вхождения подстроки в строке.
- `substr()` — возвращает подстроку.
- `str_replace()` — заменяет все вхождения подстроки в строке.
- `bin2hex()` — преобразует бинарные данные в шестнадцатеричное представление.
- `explode()` — разбивает строку на массив по разделителю (_функция была рассмотрена в материале про массивы_).
- `implode()` — объединяет массив в строку с использованием разделителя (_функция была рассмотрена в материале про массивы_).

## Длина строки

`strlen()` возвращает длину строки, включая пробелы и символы.

**Синтаксис**

```php
strlen(string $string): int
```

- **`$string`** _(обязательный)_ — строка, длину которой нужно определить.

**Пример.** _Проверка длины пароля_

```php
<?php

$password = "secure123";

if (strlen($password) < 8) {
    echo "Пароль слишком короткий. Он должен быть не менее 8 символов.";
} else {
    echo "Пароль принят.";
}
```

## Преобразование в нижний регистр

`strtolower()` преобразует строку в нижний регистр.

**Синтаксис**

```php
strtolower(string $string): string
```

- **`$string`** _(обязательный)_ — строка, которую нужно преобразовать в нижний регистр.

**Пример.** _Преобразование email в нижний регистр_

```php
<?php

$email = "John.Doe@Example.com";

$normalizedEmail = strtolower($email);

echo $normalizedEmail; // john.doe@example.com
```

## Преобразование в верхний регистр

`strtoupper()` преобразует строку в верхний регистр.

**Синтаксис**

```php
strtoupper(string $string): string
```

- **`$string`** _(обязательный)_ — строка, которую нужно преобразовать в верхний регистр.

**Пример.** _Генерация кода купона для акций_

```php
<?php

$rawCode = "special2025";

$couponCode = strtoupper($rawCode);

echo $couponCode; // SPECIAL2025
```

## Капитализация первой буквы

`ucfirst()` преобразует первый символ строки в верхний регистр.

**Синтаксис**

```php
ucfirst(string $string): string
```

- **`$string`** _(обязательный)_ — строка, первый символ которой нужно преобразовать в верхний регистр.

**Пример.** _Форматирование имени пользователя_

```php
<?php

$name = "alice";

$formattedName = ucfirst($name);

echo $formattedName; // Alice
```

## Удаление пробелов в начале и конце строки

`trim()` удаляет пробелы и другие символы из начала и конца строки.

**Синтаксис**

```php
trim(string $string, string $characters = " \n\r\t\v\x00"): string
```

- **`$string`** _(обязательный)_ — строка, из начала и конца которой нужно удалить символы.
- **`$characters`** _(необязательный)_ — строка с символами, которые нужно удалить. По умолчанию удаляются пробелы, переводы строк и табуляция.

**Пример.** _Удаление лишних пробелов из имени пользователя_

```php
<?php

$name = "  Иван Иванов  ";

$trimmedName = trim($name);
```

## Удаление пробелов с помощью `ltrim()` и `rtrim()`

`ltrim()` удаляет пробелы только с начала строки.

`rtrim()` удаляет пробелы только с конца строки.

**Синтаксис `ltrim()`**

```php
ltrim(string $string, string $characters = " \n\r\t\v\x00"): string
```

**Синтаксис `rtrim()`**

```php
rtrim(string $string, string $characters = " \n\r\t\v\x00"): string
```

- **`$string`** _(обязательный)_ — строка, из которой нужно удалить символы.
- **`$characters`** _(необязательный)_ — строка с символами, которые нужно удалить.

**Пример.** _Работа с текстовыми данными_

```php
<?php

$fileName = "  report.txt  ";

$cleanStart = ltrim($fileName);
$cleanEnd = rtrim($fileName);

echo $cleanStart; // "report.txt  "
echo $cleanEnd;   // "  report.txt"
```

## Поиск подстроки в строке

`strpos()` ищет первое вхождение подстроки в строке и возвращает её позицию (индекс).

**Синтаксис**

```php
strpos(string $haystack, string $needle, int $offset = 0): int|false
```

- **`$haystack`** _(обязательный)_ — строка, в которой выполняется поиск.
- **`$needle`** _(обязательный)_ — подстрока, которую нужно найти.
- **`$offset`** _(необязательный)_ — начальная позиция для поиска. По умолчанию поиск начинается с начала строки.

**Пример.** _Проверка, содержит ли URL строку "https"_

```php
<?php

$url = "https://example.com";

if (strpos($url, "https") === 0) {
    echo "Соединение защищено.";
}
```

## Извлечение подстроки

`substr()` возвращает часть строки. Она принимает начальную позицию и длину.

**Синтаксис**

```php
substr(string $string, int $offset, ?int $length = null): string
```

- **`$string`** _(обязательный)_ — строка, из которой нужно извлечь подстроку.
- **`$offset`** _(обязательный)_ — начальная позиция извлечения.
- **`$length`** _(необязательный)_ — длина извлекаемой подстроки. Если не указана, будет извлечена строка до конца.

**Пример.** _Сокращение текста статьи до первых 100 символов_

```php
<?php

$content = "Lorem ipsum dolor sit amet, consectetur adipiscing elit.";

$preview = substr($content, 0, 50) . "...";
echo $preview;
```

## Замена подстроки

`str_replace()` заменяет все вхождения одной подстроки на другую.

**Синтаксис**

```php
str_replace(array|string $search, array|string $replace, string|array $subject, int &$count = null): string|array
```

- **`$search`** _(обязательный)_ — строка или массив строк, которые нужно заменить.
- **`$replace`** _(обязательный)_ — строка или массив строк для замены.
- **`$subject`** _(обязательный)_ — строка или массив строк, в которых производится замена.
- **`$count`** _(необязательный)_ — количество замен, выполняемых функцией.

**Пример.** _Автоматическая цензура текста_

```php
<?php

$text = "Этот продукт ужасен!";

$filteredText = str_replace("ужасен", "не идеален", $text);

echo $filteredText; // Этот продукт не идеален!
```

## Преобразование бинарных данных в шестнадцатеричное представление

`bin2hex()` преобразует бинарные данные в шестнадцатеричное представление.

**Синтаксис**

```php
bin2hex(string $string): string
```

- **`$string`** _(обязательный)_ — строка с бинарными данными, которую нужно преобразовать в шестнадцатеричное представление.

**Пример.** _Создание токена_

```php
<?php

$token = bin2hex(random_bytes(16)); // Случайная строка из 32 символов

echo $token;
```

[^1]: _String Functions_. php.net [online]. Available at: https://www.php.net/manual/en/ref.strings.php
